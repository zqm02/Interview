## 1.介绍下重绘和重排(repaint && reflow),以及如何进行优化

整个页面可以看作是一幅画，这幅画是由浏览器绘制出来的，浏览器绘制这幅画的过程称之为渲染。

渲染是一件复杂的工作，它大致分为以下几个过程：

1.解析 HTML，生成 DOM 树，解析 CSS，生成样式规则树 2.将 DOM 树和样式规则树结合，生成渲染树(Render Tree) 3.根据生成的渲染树，确定元素的布局信息(元素尺寸，位置)，**这一步称之为 reflow，译作重排或回流** 4.根据渲染树和布局信息，生成元素的像素信息(元素横纵的像素点，左上角的偏移量、每个像素的颜色等)。**这一步称之为 repaint，译作重绘**、 5.将像素信息提交到 GPU 完成屏幕绘制

当元素的布局信息发生变化时，会导致重绘。

重排一定会导致重绘，因此布局信息的变化一定会导致像素信息的变化。

在实际开发中，获取和位置像素尺寸、位置均会导致重排和重绘，而仅设置元素的外观(比如背景颜色)则只会导致重绘，不会导致重排。

重排是一项繁琐的工作，会降低效率，因此在开发中，应该尽量避免直接获取和设置元素的尺寸、位置，尽量使用变量来保存元素的布局信息。

## 2.浏览器和 Node 事件循环的区别

浏览器的事件循环比较简单，他把任务分为宏任务和微任务，当执行栈清空后，会优先调取微任务运行，当微任务队列清空后，才会调取宏任务。

而 node 的事件循环机制比较复杂，它将整个任务调度分为 6 个阶段，当执行栈清空后，将依次循环 6 个阶段：

1.timers
2.pending callbacks
3.idle，prepare
4.poll
5.check
6.close callback

在进入任何一个阶段时，都将检查微队列中是否有任务需要执行，只有微队列清空后才能顺利进入下一阶段。
